if(!window.fni){var fni={}}if(!fni.events){fni.events={}}fni.events.FNIEventSupport={addListener:function(b){var d=$A(arguments);var c=null;var f=null;var e=100;if(d.length==2){c=this;f=d[1]}else{if(d.length==3){c=d[1];f=d[2]}else{if(d.length==4){c=d[1];f=d[2];e=d[3]}}}var a=new Object();a.eventName=b;a.method=f;a.object=c;a.priority=e;if(!this._listeners){this._listeners=new Array()}this._listeners.push(a);this._listeners=this._listeners.sortBy(function(g){return -g.priority})},removeListener:function(a,b){if(this._listeners){for(var c=0;c<this._listeners.length;c++){var d=this._listeners[c];if((d.eventName==a)&&(d.object===b)){this._listeners.splice(c,1)}}}},removeAllListeners:function(){this._listeners.clear()},fire:function(b,d){var a=true;var h=Object.extend(d||{},{stop:function(){this.stopped=true},stopped:false});if(this._listeners){var g=this._listeners.length;for(var c=g;(c>=0)&&a;c--){if(this._listeners!=null){var f=this._listeners[c];if(f&&(f!=null)){if(f.eventName==b){if(Object.isFunction(f.method)){f.method.call(f.object,h);if(h.stopped==true){a=false}}else{if((typeof console)!="undefined"){console.log("Warning: listener method does not exist for event '"+b+"'")}}}}}}}return a}};